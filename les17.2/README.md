 Обеспечение работоспособности приложения при включенном SELinux. Поиск и исправление ошибки на тестовом стенде.
 Имеем 2 ВМ: ns01 и client. При попытке внести изменения в nsupdate через client - наблюдается ошибка update failed: SERVFAIL.
 Задача данную ошибку изсправить не выключая selinux.
 1. Собственно, запускаем стенд
 vagrant up
 2. Подключаемся к client
 vagrant ssh client
 sudo -i
 3. Пробуем внести требуемые изменения (#notes необходимо обернуть команды в скрипт):
nsupdate -k /etc/named.zonetransfer.key
server 192.168.50.10
zone ddns.lab
update add www.ddns.lab. 60 A 192.168.50.15
send
quit
 4. Проверяем наличие ошибко selinux:
cat /var/log/audit/audit.log | audit2why
 5. Ошибок нет, переподключаемся на виртуалку ns01. Из другого окна терминала параллельно запускаем сессию:
 vagrant ssh ns01
 sudo -i
 cd /vagrant
 6. Дальнейшую проверку и исправление можно выполнить с помощью скрипта:
 ./script_ns01.sh
 или продолжаем вручную (пп. 7-10)
 7. Проверяем логи selinux:
 cat /var/log/audit/audit.log | audit2why
 8. В тексте ошибки видим, что проблема с контекстом безопасности. Вместо типа named_t используется тип etc_t.
 Перепроверяем, что контекст файлов в папке /etc/named не корректный:
 ls -Z /etc/named
 9. Проблема заключается в том, что конфигурационные файлы лежат в другом каталоге.
 Посмотреть в каком каталоги должны лежать, файлы, чтобы на них распространялись правильные политики SELinux можно с помощью команды:
 semanage fcontext -l | grep named
 10. Приходим к выводу, что нам необходим контекст безопасности named_zone_t, меняем текущий контекст для папки /etc/named:
 chcon -R -t named_zone_t /etc/named
 11. Возвращаемся к терминалу с подключеннием к ВМ client и повторяем пункт 3. Ошибки в этот раз не должно быть.
 12. Проверяем, что примененные изменения применились:
 dig @192.168.50.10 www.ddns.lab
 в выводе в строке ;; ->>HEADER<<- статус должен быть NOERROR
 dig @192.168.50.10 www.ddns.lab | grep status:
 13. Перезапускаем ВМ и проверяем, что проблема не повторяется (повторяем пункт 12)